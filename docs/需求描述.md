# 社交爬虫服务

基于 Crawlee 和 BullMQ 构建的多平台社交爬虫服务，支持抖音等主流平台的数据采集，采用微服务架构，部署于 Kubernetes 环境。

## 功能模块

### 1. 抖音加密逆向
- **实现方式**：直接复用 MediaCrawler 项目中的签名逻辑
- **扩展性设计**：
  - 支持多平台扩展架构
  - 支持抖音多种API（搜索、用户主页、评论、直播等）
  - 加密算法更新时通过修改源码适配
- **参考项目**：`./MediaCrawler`

### 2. Crawlee + 抖音关键字搜索API
- **爬虫类型**：
  - 优先使用 Cheerio 纯 HTTP 爬虫
  - 如API需要浏览器环境，则使用 Playwright 爬虫
- **实现逻辑**：
  - 参考 MediaCrawler 现有功能
  - 使用 Crawlee 框架重写实现
- **搜索维度**：
  - 主要：视频搜索
  - 扩展：如果 MediaCrawler 包含其他维度（用户、话题、音乐等），一并实现
- **数据存储**：
  - 搜索结果以 JSON 格式返回
  - 使用 Crawlee 默认存储机制保存
- **参考项目**：
  - `./crawlee`
  - `./MediaCrawler`

### 3. BullMQ 服务
- **主要用途**：将爬虫功能包装为队列服务
- **服务模式**：
  - 提供接口供其他客户端调用
  - 任务调度与执行
- **功能范围**：
  - 基础队列服务
  - 暂不实现复杂队列功能（优先级、延迟、重试、去重等）
  - 暂不考虑高并发场景
  - 暂不需要可视化监控面板
- **参考项目**：`./bullmq`

### 4. Docker 打包与部署
- **打包方式**：单个 Docker 容器
- **编排方式**：无需 Docker Compose
- **部署环境**：Kubernetes (K8s)

## 技术架构

### 技术栈
- **爬虫框架**：Crawlee (Node.js/TypeScript)
- **任务队列**：BullMQ
- **浏览器自动化**：Playwright / Cheerio
- **容器化**：Docker
- **编排平台**：Kubernetes

### 系统架构
```
客户端调用 → BullMQ 队列服务 → Crawlee 爬虫执行 → 数据存储 (Crawlee Storage)
                                      ↓
                              抖音API/浏览器模拟
```

## 数据存储

- **默认存储**：Crawlee 内置存储（JSON 文件）
- **存储位置**：`./storage` 目录
- **数据格式**：JSON


## 参考项目

| 项目 | 用途 | 说明 |
|------|------|------|
| MediaCrawler | 签名算法参考 | 提供抖音等平台的加密签名逻辑 |
| Crawlee | 爬虫框架 | 提供强大的爬虫和自动化能力 |
| BullMQ | 任务队列 | 提供可靠的队列服务 |

## 后续扩展计划

- [ ] 支持更多社交平台（小红书、快手、B站等）
- [ ] 实现高级队列功能（优先级、延迟、重试等）
- [ ] 添加 WebUI 管理界面
- [ ] 集成代理池支持
- [ ] 实现日志系统与监控告警
- [ ] 支持数据库持久化存储（MySQL/PostgreSQL/MongoDB等）

## 注意事项

- 本项目仅供学习使用，请遵守相关法律法规
- 抖音等平台的反爬机制可能随时更新，需要及时维护
- 请合理使用爬虫，避免对目标平台造成压力